<!DOCTYPE html>
<html>
    <head>
       <title>Hexagons</title>

    </head>
<body>
   <h1>Hexagons</h1>
        <p>Welcome to the hive</p>
<svg width="26cm" height="15cm" viewBox="0 0 2400 1600"
     xmlns="http://www.w3.org/2000/svg" version="1.1">
    <g id"AllHexagons" onclick="Hex_Click(evt)">
        
    </g>
    
</svg>  
<style type="text/css">
    polygon:hover {stroke:black;opacity: .4;}
</style>



    
    
<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="https://d3js.org/d3-polygon.v1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.2/TweenMax.min.js"></script>
<script >
   /*global d3*/
   /*global TweenLite*/
    /*global TweenMax*/
   var HexRadius = 180;
   var Yalign = Math.sin(Math.PI/180*30);
   var Xalign =Math.cos(Math.PI/180*30) 
   var HexPoints = BuildStartHex();
   
   var D3svg = d3.select("svg");
   
   var D3Nodes=D3svg.select("g");
  
       
   var D3poly=D3Nodes.selectAll("polygon")
      .data([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])
      .enter()
      .append("polygon")
      .attr("points",HexPoints.join(" "))
      .attr("fill",function(d,i){if(i<=6){return "orange";}else{return "black";}})
      .attr("id",function(d,i){return "poly" + i;})
      //.attr("fill",function() {return "hsl(" + Math.random() * 360 + ",100%,50%)";})
      .attr("stroke-width", "8px")
      .attr("stroke","blue")
      .transition()
      .duration(function(d,i){return 800;})
      .delay(function(d,i) {  return 100*i;})
      .attr("transform",  function(d,i){return "translate("+BuildHoneyComb(i)+")";});
      
    
    
    var D3text=D3Nodes.selectAll("text")
       .data([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])
       .enter()
       .append("text")
       .attr("id",function(d,i){return "text" + i;})
       .attr("x",function(d,i){ return 1200+Math.round(BuildHoneyComb(i).split(",")[0]);})
       .attr("y",function(d,i){return 800+Math.round(BuildHoneyComb(i).split(",")[1]);})
       .attr("font-family", "sans-serif")
       .attr("font-size", "80px")
       .attr("text-anchor","middle")
       .attr("fill", "black")
       .attr("visibility","hidden")
       .text(function(d,i){return i;});
    
   
  
   
  
    
    window.onload = function(){
       var TurnOnNumbers=setTimeout(function(){ D3text.style("visibility","visible"); }, 2500);    
    }
        
    
       
      
   
    
    function BuildHoneyComb(MyIndex)
    {
        //find middle
        if(MyIndex==0)
        {
            return 0 +"," + 0;
        }
        else if(MyIndex==1||MyIndex==2)
        {
            return HexRadius*Xalign*(MyIndex-1)*2-HexRadius*Xalign + "," + -1*HexRadius*Yalign*3;
        }
        else if(MyIndex==3)
        {
            return HexRadius*Xalign*2*(MyIndex-2) + ",0";
        }
        else if(MyIndex==4||MyIndex==5)
        {
            return HexRadius*Xalign*2*(5-MyIndex)-HexRadius*Xalign + "," + HexRadius*Yalign*3;
        }
        else if(MyIndex==6)
        {
            return HexRadius*Xalign*2*-1 + ",0";
        }
        else if(MyIndex==7)
        {
            return HexRadius*Xalign*-1*3 + "," + -1*HexRadius*Yalign*3;
        }
        else if(MyIndex>7&&MyIndex<11)
        {
            return HexRadius*Xalign*(MyIndex-7)*2-HexRadius*Xalign*4 + "," + -1*HexRadius*Yalign*6;
        }
        else if(MyIndex==11)
        {
            return HexRadius*Xalign*(MyIndex-9)*2-HexRadius*Xalign + "," + -1*HexRadius*Yalign*3;
        }
         else if(MyIndex==12)
        {
            return HexRadius*Xalign*(MyIndex-10)*2 + ",0";
        }
          else if(MyIndex==13)
        {
           return HexRadius*Xalign*4-HexRadius*Xalign + "," + HexRadius*Yalign*3;
        }
         else if(MyIndex>13&&MyIndex<17)
        {
            return HexRadius*Xalign*2*(15-MyIndex) + "," + HexRadius*Yalign*6;
        }
         else if(MyIndex==17)
        {
           return HexRadius*Xalign*2*-1-HexRadius*Xalign + "," + HexRadius*Yalign*3;
        }
         else if(MyIndex==18)
        {
           return HexRadius*Xalign*2*-2+ ",0";
        }
        else
        {
            return HexRadius*Xalign*2*(MyIndex-17)-HexRadius*Xalign*2 + "," + HexRadius*Yalign*3*2*2;
        }
    }
   
   function BuildStartHex()
   {
    var MidPoint ={"x":1200,"y":800};
    var Pnt1 = {"x":0,"y":0};
    var Pnt2 = {"x":0,"y":0};
    var Pnt3={"x":0,"y":0};
    var Pnt4={"x":0,"y":0};
    var Pnt5={"x":0,"y":0};
    var Pnt6={"x":0,"y":0};
  
    
    
    
    Pnt1.x=MidPoint.x+Xalign*HexRadius;
    Pnt1.y=MidPoint.y-Yalign*HexRadius;
    
    Pnt2.x=MidPoint.x+Xalign*HexRadius;
    Pnt2.y=MidPoint.y+Math.sin(Math.PI/180*30)*HexRadius;
    
    
    Pnt3.x=MidPoint.x;
    Pnt3.y=MidPoint.y+HexRadius;
    
    Pnt4.x=MidPoint.x-Xalign*HexRadius;
    Pnt4.y=MidPoint.y+Yalign*HexRadius;
    
    Pnt5.x=MidPoint.x-Xalign*HexRadius;
    Pnt5.y=MidPoint.y-Yalign*HexRadius;
    
    Pnt6.x=MidPoint.x;
    Pnt6.y=MidPoint.y-HexRadius;
   
    return [[Pnt1.x,Pnt1.y],[Pnt2.x,Pnt2.y],[Pnt3.x,Pnt3.y],[Pnt4.x,Pnt4.y],[Pnt5.x,Pnt5.y],[Pnt6.x,Pnt6.y]];
   }
   
   function Hex_Click(evt)
   {
     var Hex= evt.target;
     
      var MyTween =TweenMax.to(document.getElementById("poly" + Hex.id.slice(4)),1,{rotation:360,transformOrigin:"50% 50%",onComplete:myFunction});
   
   function myFunction()
   {
       MyTween.reverse();
   }
   }
   
   
</script>

</body>
</html>
